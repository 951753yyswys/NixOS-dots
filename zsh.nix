{ config, pkgs, ... }:

{
  programs.zsh.enable = true;
  users.users.Qaaxaap = {
    shell = pkgs.zsh;
  };
  environment.shells = with pkgs; [ bash zsh ];
  users.defaultUserShell = pkgs.zsh;
  home-manager.users.Qaaxaap = { pkgs, ... }: {
    home.file.".p10k.zsh".source = ./p10k.zsh;
    home.packages = with pkgs; [
      zsh-powerlevel10k
    ];
    programs.zsh = {
      enable = true;
      autosuggestion.enable = true;
      syntaxHighlighting.enable = true;
      oh-my-zsh = {
        enable = true;
        plugins = [ "git" "sudo" ];
        theme = "";
      };
      initContent = ''
        source ${pkgs.zsh-powerlevel10k}/share/zsh-powerlevel10k/powerlevel10k.zsh-theme
        [[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
      '';
    };
  };
}
